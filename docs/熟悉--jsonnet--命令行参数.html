<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>命令行参数</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>命令行参数</h1><br/><h3>jsonnet 可以在命令行传入参数</h3><br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;cat&nbsp;test.jsonnet&nbsp;<br />{<br />&nbsp;&nbsp;[std.extVar(&#39;prefix&#39;)&nbsp;+&nbsp;&#39;Pina&nbsp;Colada&#39;]:&nbsp;&quot;apple&quot;,}<br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;--ext-str&nbsp;prefix=&quot;Happy&nbsp;Hour&quot;&nbsp;&nbsp;&nbsp;test.jsonnet&nbsp;<br />{<br />&nbsp;&nbsp;&nbsp;&quot;Happy&nbsp;HourPina&nbsp;Colada&quot;:&nbsp;&quot;apple&quot;<br />}</div></div><br /><br />传入布尔<br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;cat&nbsp;test.jsonnet&nbsp;<br />{<br />&nbsp;&nbsp;[std.extVar(&#39;prefix&#39;)&nbsp;+&nbsp;&#39;Pina&nbsp;Colada&#39;]:&nbsp;&quot;apple&quot;,<br />[if&nbsp;std.extVar(&#39;brunch&#39;)&nbsp;then<br />&nbsp;&nbsp;&nbsp;&nbsp;std.extVar(&#39;prefix&#39;)&nbsp;+&nbsp;&#39;Bloody&nbsp;Mary&#39;<br />&nbsp;&nbsp;]:&quot;apple&quot;<br />}<br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;--ext-str&nbsp;prefix=&quot;Happy&nbsp;Hour&nbsp;&quot;&nbsp;&nbsp;--ext-code&nbsp;brunch=true&nbsp;test.jsonnet&nbsp;<br />{<br />&nbsp;&nbsp;&nbsp;&quot;Happy&nbsp;Hour&nbsp;Bloody&nbsp;Mary&quot;:&nbsp;&quot;apple&quot;,<br />&nbsp;&nbsp;&nbsp;&quot;Happy&nbsp;Hour&nbsp;Pina&nbsp;Colada&quot;:&nbsp;&quot;apple&quot;<br />}</div></div><br /><br /><br />对于方法参数的变量，可以这么传入<br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;cat&nbsp;test.jsonnet&nbsp;<br />function(prefix,&nbsp;brunch=false)<br />{&nbsp;[prefix&nbsp;+&nbsp;&#39;Pina&nbsp;Colada&#39;]:&nbsp;&quot;apple&quot;}<br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;--tla-str&nbsp;prefix=&quot;Happy&nbsp;Hour&nbsp;&quot;&nbsp;test.jsonnet&nbsp;&nbsp;<br />{<br />&nbsp;&nbsp;&nbsp;&quot;Happy&nbsp;Hour&nbsp;Pina&nbsp;Colada&quot;:&nbsp;&quot;apple&quot;<br />}</div></div><br /><br />传入布尔<br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;cat&nbsp;test.jsonnet&nbsp;<br />local&nbsp;lib&nbsp;=&nbsp;import&nbsp;&#39;library-tla.libsonnet&#39;;<br /><br />function(prefix,&nbsp;brunch=false)<br />{&nbsp;[prefix&nbsp;+&nbsp;&#39;Pina&nbsp;Colada&#39;]:&nbsp;&quot;apple&quot;,[prefix&nbsp;+&nbsp;&#39;Mimosa&#39;]:&nbsp;lib.Mimosa(brunch),}<br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;cat&nbsp;library-tla.libsonnet&nbsp;<br />{<br />&nbsp;&nbsp;Mimosa(brunch):&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;fizz&nbsp;=&nbsp;if&nbsp;brunch&nbsp;then<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Cheap&nbsp;Sparkling&nbsp;Wine&#39;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Champagne&#39;,<br />&nbsp;&nbsp;&nbsp;&nbsp;ingredients:&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;kind:&nbsp;fizz,&nbsp;qty:&nbsp;3&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;},<br />}<br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;--tla-str&nbsp;prefix=&quot;Happy&nbsp;Hour&nbsp;&quot;&nbsp;&nbsp;--tla-code&nbsp;brunch=true&nbsp;test.jsonnet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />{<br />&nbsp;&nbsp;&nbsp;&quot;Happy&nbsp;Hour&nbsp;Mimosa&quot;:&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ingredients&quot;:&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;kind&quot;:&nbsp;&quot;Cheap&nbsp;Sparkling&nbsp;Wine&quot;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;qty&quot;:&nbsp;3<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br />&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&quot;Happy&nbsp;Hour&nbsp;Pina&nbsp;Colada&quot;:&nbsp;&quot;apple&quot;<br />}</div></div><br /><br /><br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;cat&nbsp;test.jsonnet&nbsp;<br /><br />function(brunch)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;fizz&nbsp;=&nbsp;if&nbsp;brunch&nbsp;then<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Cheap&nbsp;Sparkling&nbsp;Wine&#39;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Champagne&#39;,<br />&nbsp;&nbsp;&nbsp;&nbsp;ingredients:&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;kind:&nbsp;fizz,&nbsp;qty:&nbsp;3&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;&nbsp;<br />&nbsp;&nbsp;}<br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;&nbsp;&nbsp;--tla-code&nbsp;brunch=&quot;true&quot;&nbsp;test.jsonnet&nbsp;<br />{<br />&nbsp;&nbsp;&nbsp;&quot;ingredients&quot;:&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;kind&quot;:&nbsp;&quot;Cheap&nbsp;Sparkling&nbsp;Wine&quot;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;qty&quot;:&nbsp;3<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;]<br />}</div></div></div>
</body>
</html>
