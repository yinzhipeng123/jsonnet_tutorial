<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>命令行参数</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>命令行参数</h1><br/><h3>jsonnet 可以在命令行传入参数</h3><br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;<span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;test.jsonnet&nbsp;<br /><span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;[std.extVar<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&#39;prefix&#39;</span><span style="color:#ff9d00;font-weight:700">)</span>&nbsp;+&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Pina&nbsp;Colada&#39;</span>]<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span>,<span style="color:#ff9d00;font-weight:700">}</span><br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;--ext-str&nbsp;prefix=<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&quot;</span>&nbsp;&nbsp;&nbsp;test.jsonnet&nbsp;<br /><span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;HourPina&nbsp;Colada&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span><br /><span style="color:#ff9d00;font-weight:700">}</span></div></div><br /><br />传入布尔<br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;<span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;test.jsonnet&nbsp;<br /><span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;[std.extVar<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&#39;prefix&#39;</span><span style="color:#ff9d00;font-weight:700">)</span>&nbsp;+&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Pina&nbsp;Colada&#39;</span>]<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span>,<br />[if&nbsp;std.extVar<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&#39;brunch&#39;</span><span style="color:#ff9d00;font-weight:700">)</span>&nbsp;<span style="color:#ff9d00;font-weight:700">then</span><br />&nbsp;&nbsp;&nbsp;&nbsp;std.extVar<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&#39;prefix&#39;</span><span style="color:#ff9d00;font-weight:700">)</span>&nbsp;+&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Bloody&nbsp;Mary&#39;</span><br />&nbsp;&nbsp;]<span style="color:#ff9d00;font-weight:700">:</span><span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span><br /><span style="color:#ff9d00;font-weight:700">}</span><br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;--ext-str&nbsp;prefix=<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&nbsp;&quot;</span>&nbsp;&nbsp;--ext-code&nbsp;brunch=<span style="color:#ff9d00;font-weight:700">true</span>&nbsp;test.jsonnet&nbsp;<br /><span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&nbsp;Bloody&nbsp;Mary&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span>,<br />&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&nbsp;Pina&nbsp;Colada&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span><br /><span style="color:#ff9d00;font-weight:700">}</span></div></div><br /><br /><br />对于方法参数的变量，可以这么传入<br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;<span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;test.jsonnet&nbsp;<br /><span style="color:#ff9d00;font-weight:700">function(</span>prefix,&nbsp;brunch=<span style="color:#ff9d00;font-weight:700">false)</span><br /><span style="color:#ff9d00;font-weight:700">{</span>&nbsp;[prefix&nbsp;+&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Pina&nbsp;Colada&#39;</span>]<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span><span style="color:#ff9d00;font-weight:700">}</span><br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;--tla-str&nbsp;prefix=<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&nbsp;&quot;</span>&nbsp;test.jsonnet&nbsp;&nbsp;<br /><span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&nbsp;Pina&nbsp;Colada&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span><br /><span style="color:#ff9d00;font-weight:700">}</span></div></div><br /><br />传入布尔<br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;<span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;test.jsonnet&nbsp;<br /><span style="color:#ff9d00;font-weight:700">local</span>&nbsp;lib&nbsp;=&nbsp;import&nbsp;<span style="color:#3ad900;font-weight:400">&#39;library-tla.libsonnet&#39;</span><span style="color:#ff9d00;font-weight:700">;</span><br /><br /><span style="color:#ff9d00;font-weight:700">function(</span>prefix,&nbsp;brunch=<span style="color:#ff9d00;font-weight:700">false)</span><br /><span style="color:#ff9d00;font-weight:700">{</span>&nbsp;[prefix&nbsp;+&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Pina&nbsp;Colada&#39;</span>]<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span>,[prefix&nbsp;+&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Mimosa&#39;</span>]<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;lib.Mimosa<span style="color:#ff9d00;font-weight:700">(</span>brunch<span style="color:#ff9d00;font-weight:700">)</span>,<span style="color:#ff9d00;font-weight:700">}</span><br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;<span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;library-tla.libsonnet&nbsp;<br /><span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;Mimosa<span style="color:#ff9d00;font-weight:700">(</span>brunch<span style="color:#ff9d00;font-weight:700">):</span>&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">local</span>&nbsp;fizz&nbsp;=&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;brunch&nbsp;<span style="color:#ff9d00;font-weight:700">then</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Cheap&nbsp;Sparkling&nbsp;Wine&#39;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">else</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Champagne&#39;</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;ingredients<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span>&nbsp;kind<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;fizz,&nbsp;qty<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;3&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br /><span style="color:#ff9d00;font-weight:700">}</span><br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;--tla-str&nbsp;prefix=<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&nbsp;&quot;</span>&nbsp;&nbsp;--tla-code&nbsp;brunch=<span style="color:#ff9d00;font-weight:700">true</span>&nbsp;test.jsonnet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /><span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&nbsp;Mimosa&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;ingredients&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;kind&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;Cheap&nbsp;Sparkling&nbsp;Wine&quot;</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;qty&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;3<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br />&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;Happy&nbsp;Hour&nbsp;Pina&nbsp;Colada&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;apple&quot;</span><br /><span style="color:#ff9d00;font-weight:700">}</span></div></div><br /><br /><br /><br /><div class="codebox"><div class="codebox">[root@centos7&nbsp;jsonnet_learn]#&nbsp;<span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;test.jsonnet&nbsp;<br /><br /><span style="color:#ff9d00;font-weight:700">function(</span>brunch<span style="color:#ff9d00;font-weight:700">)</span>&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">local</span>&nbsp;fizz&nbsp;=&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;brunch&nbsp;<span style="color:#ff9d00;font-weight:700">then</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Cheap&nbsp;Sparkling&nbsp;Wine&#39;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">else</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&#39;Champagne&#39;</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;ingredients<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span>&nbsp;kind<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;fizz,&nbsp;qty<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;3&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;&nbsp;<br />&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span><br />[root@centos7&nbsp;jsonnet_learn]#&nbsp;jsonnet&nbsp;&nbsp;&nbsp;--tla-code&nbsp;brunch=<span style="color:#3ad900;font-weight:400">&quot;true&quot;</span>&nbsp;test.jsonnet&nbsp;<br /><span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;ingredients&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;kind&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">&quot;Cheap&nbsp;Sparkling&nbsp;Wine&quot;</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">&quot;qty&quot;</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;3<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;]<br /><span style="color:#ff9d00;font-weight:700">}</span></div></div></div>
</body>
</html>
